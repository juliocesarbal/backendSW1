# <%= projectName %>

Spring Boot REST API generated from UML diagram.

## ğŸ“‹ Description

This project was automatically generated from a UML class diagram and provides a complete RESTful API with the following features:

- âœ… JPA Entities with relationships
- âœ… Repository layer (Spring Data JPA)
- âœ… Service layer with business logic
- âœ… REST Controllers with CRUD operations
- âœ… DTOs for request/response
- âœ… Global exception handling
- âœ… Input validation
- âœ… PostgreSQL database
- âœ… SQL database script
- âœ… Environment variable configuration
- âœ… Integration tests

## ğŸš€ Getting Started

### Prerequisites

- Java 17 or higher
- Maven 3.6+
- PostgreSQL 12+ installed locally or remotely

### Installation

1. **Clone or extract the project**

2. **Create the database**

**OpciÃ³n 1: AutomÃ¡tica (Recomendado para Windows)**

Ejecuta el script de configuraciÃ³n automÃ¡tica:

```bash
.\setup-database.bat
```

Este script:
- CrearÃ¡ la base de datos `<%= dbName %>`
- EjecutarÃ¡ todas las tablas con relaciones
- AplicarÃ¡ foreign key constraints
- CrearÃ¡ Ã­ndices para mejor rendimiento

**IMPORTANTE**: Antes de ejecutar, abre `setup-database.bat` y ajusta las credenciales:
```batch
set PGPASSWORD=tu_contraseÃ±a
set PGUSER=postgres
```

**OpciÃ³n 2: Manual**

Ejecuta el script SQL manualmente:

```bash
psql -U postgres -f database.sql
```

O conÃ©ctate a PostgreSQL y ejecuta:

```sql
psql -U postgres
\i database.sql
```

3. **Configure environment variables (optional)**

El archivo `.env` ya viene incluido con valores por defecto:

```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=<%= dbName %>
DB_USERNAME=postgres
DB_PASSWORD=postgres
SERVER_PORT=8080
JPA_DDL_AUTO=update
```

**Si necesitas cambiar la contraseÃ±a de PostgreSQL**, edita el archivo `.env`:

```bash
# Cambia DB_PASSWORD segÃºn tu configuraciÃ³n
DB_PASSWORD=tu_contraseÃ±a_aqui
```

4. **Build the project**

```bash
mvn clean install
```

4. **Run the application**

```bash
mvn spring-boot:run
```

The API will be available at: `http://localhost:8080`

## ğŸ“¡ API Endpoints

**Para ver la documentaciÃ³n completa de todos los endpoints con ejemplos, consulta:** [`Endpoints.md`](./Endpoints.md)

Resumen rÃ¡pido:

<% classes.forEach(function(cls) { %>
### <%= cls.className %>

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/<%= cls.pluralName %>` | Get all <%= cls.pluralName %> |
| GET | `/api/<%= cls.pluralName %>/{id}` | Get <%= cls.className %> by ID |
| POST | `/api/<%= cls.pluralName %>` | Create new <%= cls.className %> |
| PUT | `/api/<%= cls.pluralName %>/{id}` | Update <%= cls.className %> |
| DELETE | `/api/<%= cls.pluralName %>/{id}` | Delete <%= cls.className %> |

<% }); %>

## ğŸ§ª Testing

Run all tests:

```bash
mvn test
```

Run specific test class:

```bash
mvn test -Dtest=<ClassName>ControllerTest
```

## ğŸ“¦ Database

The application uses PostgreSQL. Default connection details:

- **Host**: localhost:5432
- **Database**: <%= dbName %>
- **Username**: postgres
- **Password**: postgres

### Database Setup

The `database.sql` script includes:
- Database creation
- All table definitions with proper data types
- Foreign key constraints for relationships
- Indexes for performance optimization
- Sample data templates (commented out)

You can customize database credentials by:
1. Setting environment variables (see `.env.example`)
2. Editing `application.properties` directly

## ğŸ› ï¸ Project Structure

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â””â”€â”€ <%= basePackage.replace(/\./g, '/') %>/
â”‚   â”‚       â”œâ”€â”€ entity/          # JPA Entities
â”‚   â”‚       â”œâ”€â”€ repository/      # Spring Data Repositories
â”‚   â”‚       â”œâ”€â”€ service/         # Business Logic
â”‚   â”‚       â”œâ”€â”€ controller/      # REST Controllers
â”‚   â”‚       â”œâ”€â”€ dto/             # Data Transfer Objects
â”‚   â”‚       â””â”€â”€ exception/       # Exception Handlers
â”‚   â””â”€â”€ resources/
â”‚       â””â”€â”€ application.properties
â””â”€â”€ test/
    â””â”€â”€ java/                    # Integration Tests
```

## ğŸ”§ Configuration

### Option 1: Environment Variables (Recommended)

Set these environment variables:

```bash
export DB_HOST=localhost
export DB_PORT=5432
export DB_NAME=<%= dbName %>
export DB_USERNAME=postgres
export DB_PASSWORD=postgres
export SERVER_PORT=8080
```

### Option 2: Edit application.properties

Edit `src/main/resources/application.properties` to configure:

- Database connection
- Server port
- JPA settings
- Logging levels

The application.properties file supports environment variables with defaults:
- `${DB_HOST:localhost}` - uses DB_HOST env var or defaults to localhost
- See `.env.example` for all available variables

## ğŸ“ Example Request

```bash
# Create a new entity
curl -X POST http://localhost:8080/api/<%= classes[0].pluralName %> \
  -H "Content-Type: application/json" \
  -d '{
    <% classes[0].sampleData.forEach(function(field, index) { %>
    "<%= field.key %>": <%= field.value %><% if (index < classes[0].sampleData.length - 1) { %>,<% } %>
    <% }); %>
  }'

# Get all entities
curl http://localhost:8080/api/<%= classes[0].pluralName %>

# Get entity by ID
curl http://localhost:8080/api/<%= classes[0].pluralName %>/1
```

## ğŸ—„ï¸ Database Commands

```bash
# ConfiguraciÃ³n automÃ¡tica (Windows)
setup-database.bat

# O crear database manualmente
psql -U postgres -f database.sql

# Conectar a la base de datos
psql -U postgres -d <%= dbName %>

# Ver tablas
\dt

# Describir estructura de tabla
\d table_name

# Eliminar base de datos (Â¡cuidado!)
DROP DATABASE <%= dbName %>;
```

## ğŸ“š Technologies Used

- Spring Boot 3.2.0
- Spring Data JPA
- PostgreSQL
- Lombok
- Jakarta Validation
- Maven

## ğŸ“„ License

Generated by UML Code Generator

---

**Generated on**: <%= new Date().toISOString() %>
